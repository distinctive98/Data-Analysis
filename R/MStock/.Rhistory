n_node_main
e_url_main <- paste0('https://www.edaily.co.kr/search/E01.html?searchvalue=',company[1],'&searchSort=accuracy')
e_url_main
e_html_main <- read_html(e_url_main, encoding = "UTF-8")
e_html_main
e_url_main <- paste0('https://www.edaily.co.kr/search/E00.html?searchbody=&jname=&searchtitle=',삼성SDI,'&searchSort=accuracy')
e_url_main <- paste0('https://www.edaily.co.kr/search/E00.html?searchbody=&jname=&searchtitle=',company[1],'&searchSort=accuracy')
e_url_main
e_html_main <- read_html(e_url_main, encoding = "UTF-8")
e_html_main
e_node_main <- html_node(e_html_main, '#component_template_id_SEARCH_NEWS_bXUs4k6rkv0peEX > div.web_widget.id_thum_main_news > div > div.arti_data > ul > li:nth-child(1) > a')
e_node_main
e_url_main <- paste0('https://www.edaily.co.kr/search/E00.html?searchbody=&jname=&searchtitle=',company[1],'&searchSort=accuracy')
e_html_main <- read_html(e_url_main, encoding = "UTF-8")
e_node_main <- html_node(e_html_main, '#component_template_id_SEARCH_NEWS_bXUs4k6rkv0peEX > div.web_widget.id_thum_main_news > div > div.arti_data > ul > li:nth-child(1) > a')
e_node_main
e_url_main <- paste0('https://www.edaily.co.kr/search/E00.html?searchbody=&jname=&searchtitle=',company[1],'&searchSort=accuracy')
e_html_main <- read_html(e_url_main, encoding = "UTF-8")
e_html_main
e_node_main <- html_node(e_html_main, '#component_template_id_SEARCH_NEWS_bXUs4k6rkv0peEX > div.web_widget.id_thum_main_news > div > div.arti_data > ul > li:nth-child(1) > a')
e_node_main
s_url_main <- paste0('http://sentv.co.kr/search/news?findex=&srh_day=&srh_option=1&skeyword=', company[1])
s_url_main
s_html_main <- read_html(s_url_main, encoding = "UTF-8")
s_html_main
s_node_main <- html_node(s_html_main, '#content > div > div > div.tab_wrap > ul.tab_cont > li:nth-child(2) > div > section > div.news_list > ul > li:nth-child(1) > div > a')
s_node_main
f_url_main <- paste0('http://www.fnnews.com/search?search_txt=', company[1])
f_html_main <- read_html(f_url_main, encoding = "UTF-8")
f_node_main <- html_node(f_html_main, paste0('#container > div > div > div.section_list > div.bd > ul > li:nth-child(',i,') > strong > a'))
f_node_main
s_node_main <- html_node(s_html_main, '#content > div > div > div.tab_wrap > ul.tab_cont > li:nth-child(2) > div > section > div.news_list > ul > li:nth-child(1) > div > a')
s_node_main
e_url_main <- paste0('https://www.edaily.co.kr/search/E00.html?searchbody=&jname=&searchtitle=',company[1],'&searchSort=accuracy')
e_html_main <- read_html(e_url_main, encoding = "UTF-8")
e_node_main <- html_node(e_html_main, '#component_template_id_SEARCH_NEWS_bXUs4k6rkv0peEX > div.web_widget.id_thum_main_news > div > div.arti_data > ul > li:nth-child(1) > a')
#서울경제
s_url_main <- paste0('http://sentv.co.kr/search/news?findex=&srh_day=&srh_option=1&skeyword=', company[1])
s_html_main <- read_html(s_url_main, encoding = "UTF-8")
s_node_main <- html_node(s_html_main, '#content > div > div > div.tab_wrap > ul.tab_cont > li:nth-child(2) > div > section > div.news_list > ul > li:nth-child(1) > div > a')
s_node_main
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_url_main
j_html_main <- read_html(j_url_main, encoding = "UTF-8")
j_html_main
j_node_main <- heml_node(j_html_main, '#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(4) > dt > a')
j_node_main
j_node_main <- heml_node(j_html_main, '#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(4) > dt > a')
j_node_main <- html_node(j_html_main, '#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(4) > dt > a')
j_node_main
j_url_news <- html_attr(j_node_main, 'href')
j_url_news
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_html_news
j_nodes_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
j_nodes_news
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
j_text <- html_text(j_node_news)
j_text
j_text <- gsub('[[:digit:][:punct:][:cntrl:]], '', j_text)
j_text
;
source('C:/Users/student/Desktop/MStock_R/analyze.R', encoding = 'UTF-8', echo=TRUE)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
j_text
newsList <- c(newsList, j_text)
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main, encoding = "UTF-8")
for(i in 1:5){
j_node_main <- html_node(j_html_main, '#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',4+i,') > dt > a')
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main, encoding = "UTF-8")
for(i in 1:5){
j_node_main <- html_node(j_html_main, '#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(4+i),') > dt > a')
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
j_node_main <- html_node(j_html_main, '#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(4+1),') > dt > a')
for(i in 4:9){
j_node_main <- html_node(j_html_main, '#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',i,') > dt > a')
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(4+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList <- c()
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(4+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(4+i),') > dt > a'))
print(j_node_main)
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList <- c()
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main, encoding = "UTF-8")
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(4+i),') > dt > a'))
print(j_node_main)
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList <- c()
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main)
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(4+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news)
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList
i <- 1
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(3+i),') > dt > a'))
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news)
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
j_text
newsList <- c()
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main)
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(3+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news)
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList
newsList <- c()
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main)
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(3+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
print(j_url_news)
j_html_news <- read_html(j_url_news)
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList
j_text
newsList <- c()
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main)
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(3+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
print(j_url_news)
j_html_news <- read_html(j_url_news)
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
print(j_text)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
j_html_news
j_node_news
newsList <- c()
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main)
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(3+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news)
j_node_news <- html_node(j_html_news, '#news_body_id > div.par > p:nth-child(1)')
print(j_node_news)
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
print(j_text)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList <- c()
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main)
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(3+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news)
j_node_news <- html_node(j_html_news, '#news_body_id > div.par')
print(j_node_news)
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
print(j_text)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList
m_url_main <- paste0('https://search.mt.co.kr/?srchFd=TOTAL&range=TOTAL&category=TOTAL&reSrchFlag=&preKwd=&search_type=m&mode=&code=&kwd=', company[1])
m_url_main
m_html_main <- read_html(m_url_main)
m_html_main <- read_html(m_url_main, encoding="UTF-8")
m_html_main <- read_html(m_url_main, encoding = "UTF-8")
m_url_main <- paste0('https://search.mt.co.kr/?srchFd=TOTAL&range=TOTAL&category=TOTAL&reSrchFlag=&preKwd=&search_type=m&mode=&code=&kwd=', company[1])
m_html_main <- read_html(m_url_main, encoding = "EUC-KR")
newsList <- c()
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main, encoding = "UTF-8")
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(3+i),') > dt > a'))
#조선일보 뉴스 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
newsList
m_url_main <- paste0('https://search.mt.co.kr/?srchFd=TOTAL&range=TOTAL&category=TOTAL&reSrchFlag=&preKwd=&search_type=m&mode=&code=&kwd=', company[1])
m_html_main <- read_html(m_url_main, encoding = "EUC-KR")
m_url_main <- paste0('https://search.mt.co.kr/?srchFd=TOTAL&range=TOTAL&category=TOTAL&reSrchFlag=&preKwd=&search_type=m&mode=&code=&kwd=', company[1])
m_html_main <- read_html(m_url_main, encoding = "CP-949")
m_html_main <- read_html(m_url_main)
m_html_main <- read_html(m_url_main, encoding = "UTF-8")
m_html_main <- read_html(m_url_main, encoding = "CP-949")
m_html_main <- read_html(m_url_main, encoding = "CP949")
m_url_main <- paste0('https://search.mt.co.kr/?srchFd=TOTAL&range=TOTAL&category=TOTAL&reSrchFlag=&preKwd=&search_type=m&mode=&code=&kwd=', company[1])
m_html_main <- read_html(m_url_main, encoding = "CP949")
m_html_main <- read_html(m_url_main, encoding = "euc-kr")
m_url_main <- paste0('https://search.mt.co.kr/?srchFd=TOTAL&range=TOTAL&category=TOTAL&reSrchFlag=&preKwd=&search_type=m&mode=&code=&kwd=', company[1])
m_html_main <- read_html(m_url_main, encoding = "euc-kr")
m_html_main <- read_html(m_url_main)
h_url_main <- paste0('https://search.hankyung.com/apps.frm/search.news?query=', company[1])
h_html_main <- read_html(h_url_main, encoding = "UTF-8")
h_html_main
h_node_main <- html_node(h_html_main, paste0('#content > div.left_cont > div > div.section.hk_news > div > ul > li:nth-child(1) > div > a'))
h_node_main
h_url_news <- html_attr(h_node_main, 'href')
h_url_news
h_html_news <- read_html(h_url_news, encoding = "UTF-8")
h_node_news <- html_node(h_html_news, '#articletxt')
h_node_news
h_text <- html_text(h_node_news)
h_text
h_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', h_text)
h_text
h_text <- str_trim(h_text)
h_text
h_node_news <- html_node(h_html_news, '#articletxt')
emailExp <- "[[:alnum:]]+[@][[:alnum:]]+[.][[[:alnum:]]+|[[:alnum:]]+[.][[:alnum:]]+]" #이메일 정규표현식
h_text <- html_text(h_node_news)
email <- regmatches(f_text, regexpr(emailExp, h_text)) #기자 이메일 추출
email
h_text
emailExp <- "[[:alnum:]]+[@][[:alnum:]]+[.]" #이메일 정규표현
h_text <- html_text(h_node_news)
email <- regmatches(f_text, regexpr(emailExp, h_text)) #기자 이메일 추출
email
emailExp <- "[[:alnum:]]+[@][[:alnum:]]+[.]" #이메일 정규표현식
h_text <- html_text(h_node_news)
email <- regmatches(h_text, regexpr(emailExp, h_text)) #기자 이메일 추출
email
h_text <- unlist(strsplit(h_text, email))[1]
h_text
h_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', h_text)
h_text <- str_trim(h_text)
h_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', h_text)
h_text <- str_trim(h_text)
h_text
newsList <- c()
#한국경제 종목 검색
h_url_main <- paste0('https://search.hankyung.com/apps.frm/search.news?query=', company[1])
h_html_main <- read_html(h_url_main, encoding = "UTF-8")
for(i in 1:5){
h_node_main <- html_node(h_html_main, paste0('#content > div.left_cont > div > div.section.hk_news > div > ul > li:nth-child(',i,') > div > a'))
#한국경제 기사
h_url_news <- html_attr(h_node_main, 'href')
h_html_news <- read_html(h_url_news, encoding = "UTF-8")
h_node_news <- html_node(h_html_news, '#articletxt')
#한국경제 기사 추출 및 정제
emailExp <- "[[:alnum:]]+[@][[:alnum:]]+[.]" #이메일 정규표현식
h_text <- html_text(h_node_news)
email <- regmatches(h_text, regexpr(emailExp, h_text)) #기자 이메일 추출
h_text <- unlist(strsplit(h_text, email))[1]
h_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', h_text)
h_text <- str_trim(h_text)
newsList <- c(newsList, h_text)
}
#한국경제 종목 검색
h_url_main <- paste0('https://search.hankyung.com/apps.frm/search.news?query=', company[1])
h_html_main <- read_html(h_url_main, encoding = "UTF-8")
for(i in 1:5){
h_node_main <- html_node(h_html_main, paste0('#content > div.left_cont > div > div.section.hk_news > div > ul > li:nth-child(',i,') > div > a'))
#한국경제 기사
h_url_news <- html_attr(h_node_main, 'href')
h_html_news <- read_html(h_url_news, encoding = "UTF-8")
h_node_news <- html_node(h_html_news, '#articletxt')
#한국경제 기사 추출 및 정제
emailExp <- "[[:alnum:]]+[@][[:alnum:]]+[.]" #이메일 정규표현식
h_text <- html_text(h_node_news)
email <- regmatches(h_text, regexpr(emailExp, h_text)) #기자 이메일 추출
h_text <- unlist(strsplit(h_text, email))[1]
h_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', h_text)
h_text <- str_trim(h_text)
newsList <- c(newsList, h_text)
}
h_url_news <- html_attr(h_node_main, 'href')
h_html_news <- read_html(h_url_news, encoding = "UTF-8")
#한국경제 종목 검색
h_url_main <- paste0('https://search.hankyung.com/apps.frm/search.news?query=', company, '&sort=RANK%2FDESC%2CDATE%2FDESC&period=ALL&area=ALL&mediaid_clust=HKPAPER&exact=&include=&except=')
h_html_main <- read_html(h_url_main, encoding = "UTF-8")
#한국경제 종목 검색
h_url_main <- paste0('https://search.hankyung.com/apps.frm/search.news?query=', company, '&sort=RANK%2FDESC%2CDATE%2FDESC&period=ALL&area=ALL&mediaid_clust=HKPAPER&exact=&include=&except=')
h_html_main <- read_html(h_url_main, encoding = "UTF-8")
h_url_main <- paste0('https://search.hankyung.com/apps.frm/search.news?query=', company, '&sort=RANK%2FDESC%2CDATE%2FDESC&period=ALL&area=ALL&mediaid_clust=HKPAPER&exact=&include=&except=')
h_url_main
h_url_main <- paste0('https://search.hankyung.com/apps.frm/search.news?query=', company[1], '&sort=RANK%2FDESC%2CDATE%2FDESC&period=ALL&area=ALL&mediaid_clust=HKPAPER&exact=&include=&except=')
h_url_main
h_html_main <- read_html(h_url_main, encoding = "UTF-8")
h_html_main
for(i in 1:5){
h_node_main <- html_node(h_html_main, paste0('#content > div.left_cont > div > div.section.hk_news > div > ul > li:nth-child(',i,') > div > a'))
#한국경제 기사
h_url_news <- html_attr(h_node_main, 'href')
h_html_news <- read_html(h_url_news, encoding = "UTF-8")
h_node_news <- html_node(h_html_news, '#articletxt')
#한국경제 기사 추출 및 정제
emailExp <- "[[:alnum:]]+[@][[:alnum:]]+[.]" #이메일 정규표현식
h_text <- html_text(h_node_news)
email <- regmatches(h_text, regexpr(emailExp, h_text)) #기자 이메일 추출
h_text <- unlist(strsplit(h_text, email))[1]
h_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', h_text)
h_text <- str_trim(h_text)
newsList <- c(newsList, h_text)
}
newsList
newsList <- c()
#파이낸셜 종목 검색 결과
f_url_main <- paste0('http://www.fnnews.com/search?search_txt=', company[1])
f_html_main <- read_html(f_url_main, encoding = "UTF-8")
for(i in 1:5){
f_node_main <- html_node(f_html_main, paste0('#container > div > div > div.section_list > div.bd > ul > li:nth-child(',i,') > strong > a'))
#파이낸셜 뉴스 기사
f_url_news <- html_attr(f_node_main, 'href')
f_html_news <- read_html(f_url_news, encoding="UTF-8")
f_node_news <- html_node(f_html_news, '#article_content')
#파이낸셜 기사 추출 및 정제
emailExp <- "[[:alnum:]]+[@][[:alnum:]]+[.][[[:alnum:]]+|[[:alnum:]]+[.][[:alnum:]]+]" #이메일 정규표현식
f_text <- html_text(f_node_news)
email <- regmatches(f_text, regexpr(emailExp, f_text)) #기자 이메일 추출
f_text <- unlist(strsplit(f_text, email))[1] #이메일 뒤 제거
f_text <- gsub('[[:digit:][:punct:][:cntrl:]]','', f_text) #숫자, 특수문자, 공백 제거
f_text <- str_trim(f_text) #앞뒤 여백 제거
newsList <- c(newsList, f_text)
}
#조선일보 종목 검색
j_url_main <- paste0('http://nsearch.chosun.com/search/total.search?query=',company[1],'&sort=0')
j_html_main <- read_html(j_url_main, encoding = "UTF-8")
for(i in 1:5){
j_node_main <- html_node(j_html_main, paste0('#Wrap > div.schCont > div > div.l_area > div.search_news_box > dl:nth-child(',(3+i),') > dt > a'))
#조선일보 기사
j_url_news <- html_attr(j_node_main, 'href')
j_html_news <- read_html(j_url_news, encoding = "UTF-8")
j_node_news <- html_node(j_html_news, '#news_body_id > div.par')
#조선일보 기사 추출 및 정제
j_text <- html_text(j_node_news)
j_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', j_text)
newsList <- c(newsList, j_text)
}
#한국경제 종목 검색
h_url_main <- paste0('https://search.hankyung.com/apps.frm/search.news?query=', company[1], '&sort=RANK%2FDESC%2CDATE%2FDESC&period=ALL&area=ALL&mediaid_clust=HKPAPER&exact=&include=&except=')
h_html_main <- read_html(h_url_main, encoding = "UTF-8")
for(i in 1:5){
h_node_main <- html_node(h_html_main, paste0('#content > div.left_cont > div > div.section.hk_news > div > ul > li:nth-child(',i,') > div > a'))
#한국경제 기사
h_url_news <- html_attr(h_node_main, 'href')
h_html_news <- read_html(h_url_news, encoding = "UTF-8")
h_node_news <- html_node(h_html_news, '#articletxt')
#한국경제 기사 추출 및 정제
emailExp <- "[[:alnum:]]+[@][[:alnum:]]+[.]" #이메일 정규표현식
h_text <- html_text(h_node_news)
email <- regmatches(h_text, regexpr(emailExp, h_text)) #기자 이메일 추출
h_text <- unlist(strsplit(h_text, email))[1]
h_text <- gsub('[[:digit:][:punct:][:cntrl:]]', '', h_text)
h_text <- str_trim(h_text)
newsList <- c(newsList, h_text)
}
newsList
View(newsList)
newsList <- gsub('[[:digit:][:punct:][:cntrl:]]', '', newsList)
newsList
textData <- sapply(newsList, extractNoun, USE.NAMES = F)
library(KoNLP)
textData <- sapply(newsList, extractNoun, USE.NAMES = F)
textData
textData <- Filter(function(x){2 <= nchar(x) & nchar(x) <= 6}, unlist(textData))
textData
textData <- sapply(newsList, extractNoun, USE.NAMES = F)
textData <- Filter(function(x){2 <= nchar(x) & nchar(x) <= 6}, textData)
textData
textData <- sapply(newsList, extractNoun, USE.NAMES = F)
textData <- Filter(function(x){2 <= nchar(x) & nchar(x) <= 6}, unlist(textData))
textData
textData <- sapply(newsList, extractNoun, USE.NAMES = F)
textData
textData <- Filter(function(x){2 <= nchar(x) & nchar(x) <= 6}, unlist(textData))
textData <- textData %>% filter(!textData %in% filterWords)
textData <- textData %>% filter(!textData %in% filterWords)
textData
mode(textData)
textData_df <- data.frame(textData)
textData_df
mode(textData_df)
class(textData_df)
class(textData)
textData_df <- textData_df %>% filter(!textData %in% filterWords)
textData_df
textData_df <- textData_df %>% filter(!textData_df %in% filterWords)
textData_df
textData <- Filter(function(x){2 <= nchar(x) & nchar(x) <= 6}, unlist(textData))
textData_df <- data.frame(textData)
textData_df <- textData_df %>% filter(!textData_df %in% filterWords)
textData_df
textData <- Filter(function(x){2 <= nchar(x) & nchar(x) <= 6}, unlist(textData))
textData_df <- data.frame(textData)
textData_df
head(textData_df)
textData_df <- textData_df %>% filter(textData %in% filterWords)
textData_df
textData_df <- data.frame(textData)
head(textData_df)
textData_df <- textData_df %>% filter(!textData %in% filterWords)
textData_df
textData_df <- data.frame(textData)
head(textData_df)
textData_df <- textData_df %>% filter(!(textData %in% filterWords))
textData_df
